<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avera | Secure Checkout</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: white;
            height: 100vh;
            overflow: hidden; 
            
            background: linear-gradient(234deg, #5a7188, #0d3053, #3971a8);
            background-size: 600% 600%;
            animation: gradient-shift 22s ease infinite;
            -webkit-animation: gradient-shift 22s ease infinite;
            -moz-animation: gradient-shift 22s ease infinite;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(20px);          
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }

        .logo-svg {
            width: 60px;
            height: 60px;
            stroke: white;
            stroke-width: 2;
            fill: none;
        }

        .tracking-wide {
            letter-spacing: 4px;
        }

        @keyframes gradient-shift { 
            0% {
                background-position: 2% 0%;
            }
            50% {
                background-position: 99% 100%;
            }
            100% {
                background-position: 2% 0%;
            }
        }

        @-webkit-keyframes gradient-shift {
            0% {
                background-position: 2% 0%;
            }
            50% {
                background-position: 99% 100%;
            }
            100% {
                background-position: 2% 0%;
            }
        }

        @-moz-keyframes gradient-shift {
            0% {
                background-position: 2% 0%;
            }
            50% {
                background-position: 99% 100%;
            }
            100% {
                background-position: 2% 0%;
            }
        }
    </style>
</head>
<body>

    <div class="container d-flex justify-content-center align-items-center vh-100">
        
        <div class="card glass-card shadow-lg" style="width: 100%; max-width: 380px;">
            <div class="card-body p-5 text-center">

                <div class="mb-4">
                    <img src="Logo.png" alt="Avera Logo" class="logo-svg">
                </div>

                <h2 class="h4 fw-bold text-uppercase tracking-wide mb-4 style text-white">AVERA</h2>

                <p class="text-white-50 mb-0 text-white">Avera Dev_Key Access</p>

                <h1 class="display-4 fw-bold my-3 text-light">₱850.00</h1>

                <div id="paypal-button-container" class="my-4"></div>

                <div class="small text-white-50 mt-3">
                    <span></span> 256-bit SSL Secure Payment
                </div>

            </div>
        </div>

    </div>

    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=PHP"></script>

    <script>
        // Safety check
        if (typeof paypal === 'undefined') {
            document.getElementById('paypal-button-container').innerHTML = 
                '<div class="alert alert-danger">Error: PayPal SDK not loaded. Check Client ID.</div>';
        }

        paypal.Buttons({
            style: {
                layout: 'vertical',
                color:  'gold',
                shape:  'rect',
                label:  'buynow'
            },
            createOrder: function(data, actions) {
                return fetch('src/paypal/create-order.php', { method: 'post' })
                    .then(res => res.json())
                    .then(orderData => orderData.id);
            },
            onApprove: function(data, actions) {
                return fetch('src/paypal/capture-order.php?order_id=' + data.orderID, { method: 'post' })
                    .then(res => res.json())
                    .then(orderData => {
                        const cardBody = document.querySelector('.card-body');
                        
                        cardBody.innerHTML = `
                            <div class="mb-4">
                                <div style="width: 80px; height: 80px; margin: 0 auto; background: rgba(76, 217, 100, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4cd964" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                    </svg>
                                </div>
                            </div>
                            
                            <h2 class="h3 fw-bold text-white mb-2">Access Granted</h2>
                            <p class="text-white-50 mb-4">Thank you for your purchase.</p>

                            <a href="#" onclick="alert('Downloading Avera_Dev_Key_v1.zip...')" class="btn btn-light w-100 py-3 fw-bold mb-2 d-flex align-items-center justify-content-center gap-2 shadow-sm">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                Download Dev_Key
                            </a>
                            <small class="text-white-50 d-block" style="font-size: 0.75rem;">Version 1.0 • 24.5 MB</small>
                            
                            <hr style="border-color: rgba(255,255,255,0.1); margin: 30px 0;">

                            <div class="text-start">
                                <p class="small text-uppercase text-white-50 mb-1" style="letter-spacing: 2px; font-size: 0.7rem;">Transaction ID</p>
                                <p class="font-monospace text-white mb-0" style="font-size: 0.9rem; letter-spacing: 1px;">
                                    ${orderData.id}
                                </p>
                            </div>
                        `;
                    });
            }
        }).render('#paypal-button-container');
    </script>
</body>
</html>